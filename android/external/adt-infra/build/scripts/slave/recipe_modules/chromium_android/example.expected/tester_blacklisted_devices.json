[
  {
    "cmd": [
      "python",
      "-u",
      "\nimport os, sys\n\nbuild_path = sys.argv[1]\nif os.path.exists(build_path):\n  for (path, dir, files) in os.walk(build_path):\n    for cur_file in files:\n      if cur_file.endswith('index.lock'):\n        path_to_file = os.path.join(path, cur_file)\n        print 'deleting %s' % path_to_file\n        os.remove(path_to_file)\n",
      "[SLAVE_BUILD]"
    ],
    "cwd": "[SLAVE_BUILD]",
    "name": "cleanup index.lock",
    "~followup_annotations": [
      "@@@STEP_LOG_LINE@python.inline@@@@",
      "@@@STEP_LOG_LINE@python.inline@import os, sys@@@",
      "@@@STEP_LOG_LINE@python.inline@@@@",
      "@@@STEP_LOG_LINE@python.inline@build_path = sys.argv[1]@@@",
      "@@@STEP_LOG_LINE@python.inline@if os.path.exists(build_path):@@@",
      "@@@STEP_LOG_LINE@python.inline@  for (path, dir, files) in os.walk(build_path):@@@",
      "@@@STEP_LOG_LINE@python.inline@    for cur_file in files:@@@",
      "@@@STEP_LOG_LINE@python.inline@      if cur_file.endswith('index.lock'):@@@",
      "@@@STEP_LOG_LINE@python.inline@        path_to_file = os.path.join(path, cur_file)@@@",
      "@@@STEP_LOG_LINE@python.inline@        print 'deleting %s' % path_to_file@@@",
      "@@@STEP_LOG_LINE@python.inline@        os.remove(path_to_file)@@@",
      "@@@STEP_LOG_END@python.inline@@@"
    ]
  },
  {
    "cmd": [
      "python",
      "-u",
      "[BUILD]/scripts/slave/bot_update.py",
      "--master",
      "chromium.testing.master",
      "--builder",
      "tester",
      "--slave",
      "tehslave",
      "--spec",
      "cache_dir = None\nsolutions = [{'deps_file': '.DEPS.git', 'managed': True, 'name': 'src/repo', 'url': 'svn://svn.chromium.org/chrome/trunk/src'}]\ntarget_os = ['android']",
      "--root",
      "src/repo",
      "--revision_mapping_file",
      "{}",
      "--patch_url",
      "https://the.patch.url/the.patch",
      "--output_json",
      "/path/to/tmp/json",
      "--revision",
      "src/repo@4f4b02f6b7fa20a3a25682c457bbc8ad589c8a00",
      "--output_manifest"
    ],
    "cwd": "[SLAVE_BUILD]",
    "name": "bot_update",
    "~followup_annotations": [
      "@@@STEP_LOG_LINE@json.output@{@@@",
      "@@@STEP_LOG_LINE@json.output@  \"did_run\": false, @@@",
      "@@@STEP_LOG_LINE@json.output@  \"patch_failure\": false@@@",
      "@@@STEP_LOG_LINE@json.output@}@@@",
      "@@@STEP_LOG_END@json.output@@@"
    ]
  },
  {
    "cmd": [
      "python",
      "-u",
      "[DEPOT_TOOLS]/gclient.py",
      "config",
      "--spec",
      "cache_dir = None\nsolutions = [{'deps_file': '.DEPS.git', 'managed': True, 'name': 'src/repo', 'url': 'svn://svn.chromium.org/chrome/trunk/src'}]\ntarget_os = ['android']"
    ],
    "cwd": "[SLAVE_BUILD]",
    "name": "gclient setup"
  },
  {
    "cmd": [
      "python",
      "-u",
      "[BUILD]/scripts/slave/gclient_safe_revert.py",
      ".",
      "[DEPOT_TOOLS]/gclient"
    ],
    "cwd": "[SLAVE_BUILD]",
    "name": "gclient revert"
  },
  {
    "cmd": [
      "python",
      "-u",
      "[DEPOT_TOOLS]/gclient.py",
      "sync",
      "--nohooks",
      "--force",
      "--verbose",
      "--delete_unversioned_trees",
      "--revision",
      "src/repo@4f4b02f6b7fa20a3a25682c457bbc8ad589c8a00",
      "--output-json",
      "/path/to/tmp/json"
    ],
    "cwd": "[SLAVE_BUILD]",
    "name": "gclient sync",
    "~followup_annotations": [
      "@@@STEP_LOG_LINE@json.output@{@@@",
      "@@@STEP_LOG_LINE@json.output@  \"solutions\": {@@@",
      "@@@STEP_LOG_LINE@json.output@    \"src/\": {@@@",
      "@@@STEP_LOG_LINE@json.output@      \"revision\": 170242@@@",
      "@@@STEP_LOG_LINE@json.output@    }, @@@",
      "@@@STEP_LOG_LINE@json.output@    \"src/native_client/\": {@@@",
      "@@@STEP_LOG_LINE@json.output@      \"revision\": 274981@@@",
      "@@@STEP_LOG_LINE@json.output@    }, @@@",
      "@@@STEP_LOG_LINE@json.output@    \"src/repo/\": {@@@",
      "@@@STEP_LOG_LINE@json.output@      \"revision\": 126336@@@",
      "@@@STEP_LOG_LINE@json.output@    }, @@@",
      "@@@STEP_LOG_LINE@json.output@    \"src/third_party/angle/\": {@@@",
      "@@@STEP_LOG_LINE@json.output@      \"revision\": 297276@@@",
      "@@@STEP_LOG_LINE@json.output@    }, @@@",
      "@@@STEP_LOG_LINE@json.output@    \"src/third_party/webrtc/\": {@@@",
      "@@@STEP_LOG_LINE@json.output@      \"revision\": 120644@@@",
      "@@@STEP_LOG_LINE@json.output@    }, @@@",
      "@@@STEP_LOG_LINE@json.output@    \"src/tools/swarming_client/\": {@@@",
      "@@@STEP_LOG_LINE@json.output@      \"revision\": 276089@@@",
      "@@@STEP_LOG_LINE@json.output@    }, @@@",
      "@@@STEP_LOG_LINE@json.output@    \"src/v8/\": {@@@",
      "@@@STEP_LOG_LINE@json.output@      \"revision\": 43426@@@",
      "@@@STEP_LOG_LINE@json.output@    }@@@",
      "@@@STEP_LOG_LINE@json.output@  }@@@",
      "@@@STEP_LOG_LINE@json.output@}@@@",
      "@@@STEP_LOG_END@json.output@@@",
      "@@@SET_BUILD_PROPERTY@got_nacl_revision@274981@@@",
      "@@@SET_BUILD_PROPERTY@got_src_revision@170242@@@",
      "@@@SET_BUILD_PROPERTY@got_webrtc_revision@120644@@@",
      "@@@SET_BUILD_PROPERTY@got_swarming_client_revision@276089@@@",
      "@@@SET_BUILD_PROPERTY@got_angle_revision@297276@@@",
      "@@@SET_BUILD_PROPERTY@got_v8_revision@43426@@@"
    ]
  },
  {
    "cmd": [
      "python",
      "-u",
      "\nimport shutil, sys, os\nshutil.rmtree(sys.argv[1], True)\nshutil.rmtree(sys.argv[2], True)\ntry:\n  os.remove(sys.argv[3])\nexcept OSError:\n  pass\nfor base, _dirs, files in os.walk(sys.argv[4]):\n  for f in files:\n    if f.endswith('.pyc'):\n      os.remove(os.path.join(base, f))\n",
      "[SLAVE_BUILD]/src/out/Release/debug_info_dumps",
      "[SLAVE_BUILD]/src/out/Release/test_logs",
      "[SLAVE_BUILD]/src/out/build_product.zip",
      "[SLAVE_BUILD]/src"
    ],
    "cwd": "[SLAVE_BUILD]",
    "name": "clean local files",
    "~followup_annotations": [
      "@@@STEP_LOG_LINE@python.inline@@@@",
      "@@@STEP_LOG_LINE@python.inline@import shutil, sys, os@@@",
      "@@@STEP_LOG_LINE@python.inline@shutil.rmtree(sys.argv[1], True)@@@",
      "@@@STEP_LOG_LINE@python.inline@shutil.rmtree(sys.argv[2], True)@@@",
      "@@@STEP_LOG_LINE@python.inline@try:@@@",
      "@@@STEP_LOG_LINE@python.inline@  os.remove(sys.argv[3])@@@",
      "@@@STEP_LOG_LINE@python.inline@except OSError:@@@",
      "@@@STEP_LOG_LINE@python.inline@  pass@@@",
      "@@@STEP_LOG_LINE@python.inline@for base, _dirs, files in os.walk(sys.argv[4]):@@@",
      "@@@STEP_LOG_LINE@python.inline@  for f in files:@@@",
      "@@@STEP_LOG_LINE@python.inline@    if f.endswith('.pyc'):@@@",
      "@@@STEP_LOG_LINE@python.inline@      os.remove(os.path.join(base, f))@@@",
      "@@@STEP_LOG_END@python.inline@@@"
    ]
  },
  {
    "cmd": [
      "python",
      "-u",
      "[DEPOT_TOOLS]/gclient.py",
      "runhooks"
    ],
    "cwd": "[SLAVE_BUILD]",
    "env": {
      "GYP_CROSSCOMPILE": "1",
      "GYP_DEFINES": "OS=android component=static_library fastbuild=1 target_arch=arm",
      "PATH": "[SLAVE_BUILD]/src/third_party/android_tools/sdk/platform-tools:[SLAVE_BUILD]/src/build/android:%(PATH)s"
    },
    "name": "gclient runhooks"
  },
  {
    "allow_subannotations": false,
    "cmd": [
      "[SLAVE_BUILD]/src/build/tree_truth.sh",
      "[SLAVE_BUILD]/src",
      "src",
      "foo",
      "src/repo"
    ],
    "cwd": "[SLAVE_BUILD]",
    "name": "tree truth steps"
  },
  {
    "cmd": [
      "cat",
      "[SLAVE_BUILD]/src/chrome/VERSION"
    ],
    "cwd": "[SLAVE_BUILD]",
    "name": "get version",
    "stdout": "/path/to/tmp/version"
  },
  {
    "cmd": [
      "python",
      "-u",
      "RECIPE_MODULE[gsutil]/resources/gsutil_wrapper.py",
      "--",
      "[DEPOT_TOOLS]/gsutil.py",
      "--force-version",
      "4.7",
      "----",
      "cp",
      "gs://build-bucket/build_product.zip",
      "[SLAVE_BUILD]/src/out/build_product.zip"
    ],
    "cwd": "[SLAVE_BUILD]",
    "name": "gsutil download_build_product"
  },
  {
    "cmd": [
      "unzip",
      "-o",
      "[SLAVE_BUILD]/src/out/build_product.zip"
    ],
    "cwd": "[SLAVE_BUILD]/src",
    "name": "unzip_build_product"
  },
  {
    "cmd": [
      "[DEPOT_TOOLS]/git_number.py"
    ],
    "cwd": "[SLAVE_BUILD]/src",
    "name": "git_number",
    "stdout": "/path/to/tmp/"
  },
  {
    "cmd": [
      "python",
      "-u",
      "RECIPE_MODULE[adb]/resources/list_devices.py",
      "['[SLAVE_BUILD]/src/third_party/android_tools/sdk/platform-tools/adb', 'devices']",
      "/path/to/tmp/json"
    ],
    "cwd": "[SLAVE_BUILD]",
    "name": "List adb devices",
    "~followup_annotations": [
      "@@@STEP_LOG_LINE@json.output@[@@@",
      "@@@STEP_LOG_LINE@json.output@  \"014E1F310401C009\"@@@",
      "@@@STEP_LOG_LINE@json.output@]@@@",
      "@@@STEP_LOG_END@json.output@@@"
    ]
  },
  {
    "cmd": [
      "python",
      "-u",
      "\nimport subprocess\nimport sys\nadb_path = sys.argv[1]\nfor device in sys.argv[2:]:\n  print 'Attempting to root device %s ...' % (device)\n  subprocess.check_call([adb_path, '-s', device, 'root'])\n  subprocess.check_call([adb_path, '-s', device, 'wait-for-device'])\n  print 'Finished rooting device %s' % (device)\n",
      "[SLAVE_BUILD]/src/third_party/android_tools/sdk/platform-tools/adb",
      "014E1F310401C009"
    ],
    "cwd": "[SLAVE_BUILD]",
    "name": "Root devices",
    "~followup_annotations": [
      "@@@STEP_LOG_LINE@python.inline@@@@",
      "@@@STEP_LOG_LINE@python.inline@import subprocess@@@",
      "@@@STEP_LOG_LINE@python.inline@import sys@@@",
      "@@@STEP_LOG_LINE@python.inline@adb_path = sys.argv[1]@@@",
      "@@@STEP_LOG_LINE@python.inline@for device in sys.argv[2:]:@@@",
      "@@@STEP_LOG_LINE@python.inline@  print 'Attempting to root device %s ...' % (device)@@@",
      "@@@STEP_LOG_LINE@python.inline@  subprocess.check_call([adb_path, '-s', device, 'root'])@@@",
      "@@@STEP_LOG_LINE@python.inline@  subprocess.check_call([adb_path, '-s', device, 'wait-for-device'])@@@",
      "@@@STEP_LOG_LINE@python.inline@  print 'Finished rooting device %s' % (device)@@@",
      "@@@STEP_LOG_END@python.inline@@@"
    ]
  },
  {
    "cmd": [
      "[BUILD]/scripts/slave/daemonizer.py",
      "--",
      "[SLAVE_BUILD]/src/build/android/adb_logcat_monitor.py",
      "[SLAVE_BUILD]/src/out/logcat"
    ],
    "cwd": "[SLAVE_BUILD]",
    "env": {
      "PATH": "[SLAVE_BUILD]/src/third_party/android_tools/sdk/platform-tools:[SLAVE_BUILD]/src/build/android:%(PATH)s"
    },
    "name": "spawn_logcat_monitor"
  },
  {
    "cmd": [
      "python",
      "-u",
      "[BUILD]/scripts/slave/android/authorize_adb_devices.py",
      "--verbose",
      "--adb-path",
      "[SLAVE_BUILD]/src/third_party/android_tools/sdk/platform-tools/adb"
    ],
    "cwd": "[SLAVE_BUILD]",
    "env": {
      "PATH": "[SLAVE_BUILD]/src/third_party/android_tools/sdk/platform-tools:[SLAVE_BUILD]/src/build/android:%(PATH)s"
    },
    "name": "authorize_adb_devices"
  },
  {
    "cmd": [
      "[SLAVE_BUILD]/src/build/android/buildbot/bb_device_status_check.py",
      "--json-output",
      "/path/to/tmp/json",
      "--blacklist-file",
      "[SLAVE_BUILD]/src/out/bad_devices.json"
    ],
    "cwd": "[SLAVE_BUILD]",
    "env": {
      "PATH": "[SLAVE_BUILD]/src/third_party/android_tools/sdk/platform-tools:[SLAVE_BUILD]/src/build/android:%(PATH)s"
    },
    "name": "device_status_check",
    "~followup_annotations": [
      "@@@STEP_TEXT@Online devices: 1@@@",
      "@@@STEP_LOG_LINE@json.output@[@@@",
      "@@@STEP_LOG_LINE@json.output@  {@@@",
      "@@@STEP_LOG_LINE@json.output@    \"adb_status\": \"device\", @@@",
      "@@@STEP_LOG_LINE@json.output@    \"battery\": {@@@",
      "@@@STEP_LOG_LINE@json.output@      \"AC powered\": \"false\", @@@",
      "@@@STEP_LOG_LINE@json.output@      \"USB powered\": \"true\", @@@",
      "@@@STEP_LOG_LINE@json.output@      \"Wireless powered\": \"false\", @@@",
      "@@@STEP_LOG_LINE@json.output@      \"health\": \"2\", @@@",
      "@@@STEP_LOG_LINE@json.output@      \"level\": \"100\", @@@",
      "@@@STEP_LOG_LINE@json.output@      \"present\": \"true\", @@@",
      "@@@STEP_LOG_LINE@json.output@      \"scale\": \"100\", @@@",
      "@@@STEP_LOG_LINE@json.output@      \"status\": \"5\", @@@",
      "@@@STEP_LOG_LINE@json.output@      \"technology\": \"Li-ion\", @@@",
      "@@@STEP_LOG_LINE@json.output@      \"temperature\": \"249\", @@@",
      "@@@STEP_LOG_LINE@json.output@      \"voltage\": \"4286\"@@@",
      "@@@STEP_LOG_LINE@json.output@    }, @@@",
      "@@@STEP_LOG_LINE@json.output@    \"blacklisted\": false, @@@",
      "@@@STEP_LOG_LINE@json.output@    \"build\": \"LRX21O\", @@@",
      "@@@STEP_LOG_LINE@json.output@    \"build_detail\": \"google/razor/flo:5.0/LRX21O/1570415:userdebug/dev-keys\", @@@",
      "@@@STEP_LOG_LINE@json.output@    \"imei_slice\": \"Unknown\", @@@",
      "@@@STEP_LOG_LINE@json.output@    \"serial\": \"07a00ca4\", @@@",
      "@@@STEP_LOG_LINE@json.output@    \"type\": \"flo\", @@@",
      "@@@STEP_LOG_LINE@json.output@    \"usb_status\": true, @@@",
      "@@@STEP_LOG_LINE@json.output@    \"wifi_ip\": \"\"@@@",
      "@@@STEP_LOG_LINE@json.output@  }, @@@",
      "@@@STEP_LOG_LINE@json.output@  {@@@",
      "@@@STEP_LOG_LINE@json.output@    \"adb_status\": \"offline\", @@@",
      "@@@STEP_LOG_LINE@json.output@    \"blacklisted\": true, @@@",
      "@@@STEP_LOG_LINE@json.output@    \"serial\": \"03e0363a003c6ad4\", @@@",
      "@@@STEP_LOG_LINE@json.output@    \"usb_status\": false@@@",
      "@@@STEP_LOG_LINE@json.output@  }, @@@",
      "@@@STEP_LOG_LINE@json.output@  {@@@",
      "@@@STEP_LOG_LINE@json.output@    \"adb_status\": \"unauthorized\", @@@",
      "@@@STEP_LOG_LINE@json.output@    \"blacklisted\": true, @@@",
      "@@@STEP_LOG_LINE@json.output@    \"serial\": \"03e0363a003c6ad5\", @@@",
      "@@@STEP_LOG_LINE@json.output@    \"usb_status\": true@@@",
      "@@@STEP_LOG_LINE@json.output@  }, @@@",
      "@@@STEP_LOG_LINE@json.output@  {@@@",
      "@@@STEP_LOG_LINE@json.output@    \"adb_status\": \"device\", @@@",
      "@@@STEP_LOG_LINE@json.output@    \"blacklisted\": true, @@@",
      "@@@STEP_LOG_LINE@json.output@    \"serial\": \"03e0363a003c6ad6\", @@@",
      "@@@STEP_LOG_LINE@json.output@    \"usb_status\": true@@@",
      "@@@STEP_LOG_LINE@json.output@  }@@@",
      "@@@STEP_LOG_LINE@json.output@]@@@",
      "@@@STEP_LOG_END@json.output@@@",
      "@@@STEP_LOG_LINE@flo LRX21O 07a00ca4@{@@@",
      "@@@STEP_LOG_LINE@flo LRX21O 07a00ca4@  \"adb_status\": \"device\", @@@",
      "@@@STEP_LOG_LINE@flo LRX21O 07a00ca4@  \"battery\": {@@@",
      "@@@STEP_LOG_LINE@flo LRX21O 07a00ca4@    \"AC powered\": \"false\", @@@",
      "@@@STEP_LOG_LINE@flo LRX21O 07a00ca4@    \"USB powered\": \"true\", @@@",
      "@@@STEP_LOG_LINE@flo LRX21O 07a00ca4@    \"Wireless powered\": \"false\", @@@",
      "@@@STEP_LOG_LINE@flo LRX21O 07a00ca4@    \"health\": \"2\", @@@",
      "@@@STEP_LOG_LINE@flo LRX21O 07a00ca4@    \"level\": \"100\", @@@",
      "@@@STEP_LOG_LINE@flo LRX21O 07a00ca4@    \"present\": \"true\", @@@",
      "@@@STEP_LOG_LINE@flo LRX21O 07a00ca4@    \"scale\": \"100\", @@@",
      "@@@STEP_LOG_LINE@flo LRX21O 07a00ca4@    \"status\": \"5\", @@@",
      "@@@STEP_LOG_LINE@flo LRX21O 07a00ca4@    \"technology\": \"Li-ion\", @@@",
      "@@@STEP_LOG_LINE@flo LRX21O 07a00ca4@    \"temperature\": \"249\", @@@",
      "@@@STEP_LOG_LINE@flo LRX21O 07a00ca4@    \"voltage\": \"4286\"@@@",
      "@@@STEP_LOG_LINE@flo LRX21O 07a00ca4@  }, @@@",
      "@@@STEP_LOG_LINE@flo LRX21O 07a00ca4@  \"blacklisted\": false, @@@",
      "@@@STEP_LOG_LINE@flo LRX21O 07a00ca4@  \"build\": \"LRX21O\", @@@",
      "@@@STEP_LOG_LINE@flo LRX21O 07a00ca4@  \"build_detail\": \"google/razor/flo:5.0/LRX21O/1570415:userdebug/dev-keys\", @@@",
      "@@@STEP_LOG_LINE@flo LRX21O 07a00ca4@  \"imei_slice\": \"Unknown\", @@@",
      "@@@STEP_LOG_LINE@flo LRX21O 07a00ca4@  \"serial\": \"07a00ca4\", @@@",
      "@@@STEP_LOG_LINE@flo LRX21O 07a00ca4@  \"type\": \"flo\", @@@",
      "@@@STEP_LOG_LINE@flo LRX21O 07a00ca4@  \"usb_status\": true, @@@",
      "@@@STEP_LOG_LINE@flo LRX21O 07a00ca4@  \"wifi_ip\": \"\"@@@",
      "@@@STEP_LOG_LINE@flo LRX21O 07a00ca4@}@@@",
      "@@@STEP_LOG_END@flo LRX21O 07a00ca4@@@",
      "@@@STEP_LOG_LINE@03e0363a003c6ad4: missing@{@@@",
      "@@@STEP_LOG_LINE@03e0363a003c6ad4: missing@  \"adb_status\": \"offline\", @@@",
      "@@@STEP_LOG_LINE@03e0363a003c6ad4: missing@  \"blacklisted\": true, @@@",
      "@@@STEP_LOG_LINE@03e0363a003c6ad4: missing@  \"serial\": \"03e0363a003c6ad4\", @@@",
      "@@@STEP_LOG_LINE@03e0363a003c6ad4: missing@  \"usb_status\": false@@@",
      "@@@STEP_LOG_LINE@03e0363a003c6ad4: missing@}@@@",
      "@@@STEP_LOG_END@03e0363a003c6ad4: missing@@@",
      "@@@STEP_LOG_LINE@03e0363a003c6ad5: adb status unauthorized@{@@@",
      "@@@STEP_LOG_LINE@03e0363a003c6ad5: adb status unauthorized@  \"adb_status\": \"unauthorized\", @@@",
      "@@@STEP_LOG_LINE@03e0363a003c6ad5: adb status unauthorized@  \"blacklisted\": true, @@@",
      "@@@STEP_LOG_LINE@03e0363a003c6ad5: adb status unauthorized@  \"serial\": \"03e0363a003c6ad5\", @@@",
      "@@@STEP_LOG_LINE@03e0363a003c6ad5: adb status unauthorized@  \"usb_status\": true@@@",
      "@@@STEP_LOG_LINE@03e0363a003c6ad5: adb status unauthorized@}@@@",
      "@@@STEP_LOG_END@03e0363a003c6ad5: adb status unauthorized@@@",
      "@@@STEP_LOG_LINE@03e0363a003c6ad6: blacklisted@{@@@",
      "@@@STEP_LOG_LINE@03e0363a003c6ad6: blacklisted@  \"adb_status\": \"device\", @@@",
      "@@@STEP_LOG_LINE@03e0363a003c6ad6: blacklisted@  \"blacklisted\": true, @@@",
      "@@@STEP_LOG_LINE@03e0363a003c6ad6: blacklisted@  \"serial\": \"03e0363a003c6ad6\", @@@",
      "@@@STEP_LOG_LINE@03e0363a003c6ad6: blacklisted@  \"usb_status\": true@@@",
      "@@@STEP_LOG_LINE@03e0363a003c6ad6: blacklisted@}@@@",
      "@@@STEP_LOG_END@03e0363a003c6ad6: blacklisted@@@"
    ]
  },
  {
    "cmd": [
      "python",
      "-u",
      "[SLAVE_BUILD]/src/build/android/provision_devices.py",
      "-t",
      "Release",
      "--blacklist-file",
      "[SLAVE_BUILD]/src/out/bad_devices.json",
      "--output-device-blacklist",
      "/path/to/tmp/json"
    ],
    "cwd": "[SLAVE_BUILD]",
    "env": {
      "PATH": "[SLAVE_BUILD]/src/third_party/android_tools/sdk/platform-tools:[SLAVE_BUILD]/src/build/android:%(PATH)s"
    },
    "name": "provision_devices",
    "~followup_annotations": [
      "@@@STEP_LOG_LINE@blacklisted abc123@abc123@@@",
      "@@@STEP_LOG_END@blacklisted abc123@@@",
      "@@@STEP_LOG_LINE@blacklisted def456@def456@@@",
      "@@@STEP_LOG_END@blacklisted def456@@@",
      "@@@STEP_WARNINGS@@@"
    ]
  },
  {
    "cmd": [
      "[SLAVE_BUILD]/src/build/android/buildbot/bb_device_status_check.py",
      "--json-output",
      "/path/to/tmp/json",
      "--blacklist-file",
      "[SLAVE_BUILD]/src/out/bad_devices.json"
    ],
    "cwd": "[SLAVE_BUILD]",
    "env": {
      "PATH": "[SLAVE_BUILD]/src/third_party/android_tools/sdk/platform-tools:[SLAVE_BUILD]/src/build/android:%(PATH)s"
    },
    "name": "device_status_check (2)",
    "~followup_annotations": [
      "@@@STEP_TEXT@Online devices: 1@@@",
      "@@@STEP_LOG_LINE@json.output@[@@@",
      "@@@STEP_LOG_LINE@json.output@  {@@@",
      "@@@STEP_LOG_LINE@json.output@    \"adb_status\": \"device\", @@@",
      "@@@STEP_LOG_LINE@json.output@    \"battery\": {@@@",
      "@@@STEP_LOG_LINE@json.output@      \"AC powered\": \"false\", @@@",
      "@@@STEP_LOG_LINE@json.output@      \"USB powered\": \"true\", @@@",
      "@@@STEP_LOG_LINE@json.output@      \"Wireless powered\": \"false\", @@@",
      "@@@STEP_LOG_LINE@json.output@      \"health\": \"2\", @@@",
      "@@@STEP_LOG_LINE@json.output@      \"level\": \"100\", @@@",
      "@@@STEP_LOG_LINE@json.output@      \"present\": \"true\", @@@",
      "@@@STEP_LOG_LINE@json.output@      \"scale\": \"100\", @@@",
      "@@@STEP_LOG_LINE@json.output@      \"status\": \"5\", @@@",
      "@@@STEP_LOG_LINE@json.output@      \"technology\": \"Li-ion\", @@@",
      "@@@STEP_LOG_LINE@json.output@      \"temperature\": \"249\", @@@",
      "@@@STEP_LOG_LINE@json.output@      \"voltage\": \"4286\"@@@",
      "@@@STEP_LOG_LINE@json.output@    }, @@@",
      "@@@STEP_LOG_LINE@json.output@    \"blacklisted\": false, @@@",
      "@@@STEP_LOG_LINE@json.output@    \"build\": \"LRX21O\", @@@",
      "@@@STEP_LOG_LINE@json.output@    \"build_detail\": \"google/razor/flo:5.0/LRX21O/1570415:userdebug/dev-keys\", @@@",
      "@@@STEP_LOG_LINE@json.output@    \"imei_slice\": \"Unknown\", @@@",
      "@@@STEP_LOG_LINE@json.output@    \"serial\": \"07a00ca4\", @@@",
      "@@@STEP_LOG_LINE@json.output@    \"type\": \"flo\", @@@",
      "@@@STEP_LOG_LINE@json.output@    \"usb_status\": true, @@@",
      "@@@STEP_LOG_LINE@json.output@    \"wifi_ip\": \"\"@@@",
      "@@@STEP_LOG_LINE@json.output@  }, @@@",
      "@@@STEP_LOG_LINE@json.output@  {@@@",
      "@@@STEP_LOG_LINE@json.output@    \"adb_status\": \"offline\", @@@",
      "@@@STEP_LOG_LINE@json.output@    \"blacklisted\": true, @@@",
      "@@@STEP_LOG_LINE@json.output@    \"serial\": \"03e0363a003c6ad4\", @@@",
      "@@@STEP_LOG_LINE@json.output@    \"usb_status\": false@@@",
      "@@@STEP_LOG_LINE@json.output@  }, @@@",
      "@@@STEP_LOG_LINE@json.output@  {@@@",
      "@@@STEP_LOG_LINE@json.output@    \"adb_status\": \"unauthorized\", @@@",
      "@@@STEP_LOG_LINE@json.output@    \"blacklisted\": true, @@@",
      "@@@STEP_LOG_LINE@json.output@    \"serial\": \"03e0363a003c6ad5\", @@@",
      "@@@STEP_LOG_LINE@json.output@    \"usb_status\": true@@@",
      "@@@STEP_LOG_LINE@json.output@  }, @@@",
      "@@@STEP_LOG_LINE@json.output@  {@@@",
      "@@@STEP_LOG_LINE@json.output@    \"adb_status\": \"device\", @@@",
      "@@@STEP_LOG_LINE@json.output@    \"blacklisted\": true, @@@",
      "@@@STEP_LOG_LINE@json.output@    \"serial\": \"03e0363a003c6ad6\", @@@",
      "@@@STEP_LOG_LINE@json.output@    \"usb_status\": true@@@",
      "@@@STEP_LOG_LINE@json.output@  }@@@",
      "@@@STEP_LOG_LINE@json.output@]@@@",
      "@@@STEP_LOG_END@json.output@@@",
      "@@@STEP_LOG_LINE@flo LRX21O 07a00ca4@{@@@",
      "@@@STEP_LOG_LINE@flo LRX21O 07a00ca4@  \"adb_status\": \"device\", @@@",
      "@@@STEP_LOG_LINE@flo LRX21O 07a00ca4@  \"battery\": {@@@",
      "@@@STEP_LOG_LINE@flo LRX21O 07a00ca4@    \"AC powered\": \"false\", @@@",
      "@@@STEP_LOG_LINE@flo LRX21O 07a00ca4@    \"USB powered\": \"true\", @@@",
      "@@@STEP_LOG_LINE@flo LRX21O 07a00ca4@    \"Wireless powered\": \"false\", @@@",
      "@@@STEP_LOG_LINE@flo LRX21O 07a00ca4@    \"health\": \"2\", @@@",
      "@@@STEP_LOG_LINE@flo LRX21O 07a00ca4@    \"level\": \"100\", @@@",
      "@@@STEP_LOG_LINE@flo LRX21O 07a00ca4@    \"present\": \"true\", @@@",
      "@@@STEP_LOG_LINE@flo LRX21O 07a00ca4@    \"scale\": \"100\", @@@",
      "@@@STEP_LOG_LINE@flo LRX21O 07a00ca4@    \"status\": \"5\", @@@",
      "@@@STEP_LOG_LINE@flo LRX21O 07a00ca4@    \"technology\": \"Li-ion\", @@@",
      "@@@STEP_LOG_LINE@flo LRX21O 07a00ca4@    \"temperature\": \"249\", @@@",
      "@@@STEP_LOG_LINE@flo LRX21O 07a00ca4@    \"voltage\": \"4286\"@@@",
      "@@@STEP_LOG_LINE@flo LRX21O 07a00ca4@  }, @@@",
      "@@@STEP_LOG_LINE@flo LRX21O 07a00ca4@  \"blacklisted\": false, @@@",
      "@@@STEP_LOG_LINE@flo LRX21O 07a00ca4@  \"build\": \"LRX21O\", @@@",
      "@@@STEP_LOG_LINE@flo LRX21O 07a00ca4@  \"build_detail\": \"google/razor/flo:5.0/LRX21O/1570415:userdebug/dev-keys\", @@@",
      "@@@STEP_LOG_LINE@flo LRX21O 07a00ca4@  \"imei_slice\": \"Unknown\", @@@",
      "@@@STEP_LOG_LINE@flo LRX21O 07a00ca4@  \"serial\": \"07a00ca4\", @@@",
      "@@@STEP_LOG_LINE@flo LRX21O 07a00ca4@  \"type\": \"flo\", @@@",
      "@@@STEP_LOG_LINE@flo LRX21O 07a00ca4@  \"usb_status\": true, @@@",
      "@@@STEP_LOG_LINE@flo LRX21O 07a00ca4@  \"wifi_ip\": \"\"@@@",
      "@@@STEP_LOG_LINE@flo LRX21O 07a00ca4@}@@@",
      "@@@STEP_LOG_END@flo LRX21O 07a00ca4@@@",
      "@@@STEP_LOG_LINE@03e0363a003c6ad4: missing@{@@@",
      "@@@STEP_LOG_LINE@03e0363a003c6ad4: missing@  \"adb_status\": \"offline\", @@@",
      "@@@STEP_LOG_LINE@03e0363a003c6ad4: missing@  \"blacklisted\": true, @@@",
      "@@@STEP_LOG_LINE@03e0363a003c6ad4: missing@  \"serial\": \"03e0363a003c6ad4\", @@@",
      "@@@STEP_LOG_LINE@03e0363a003c6ad4: missing@  \"usb_status\": false@@@",
      "@@@STEP_LOG_LINE@03e0363a003c6ad4: missing@}@@@",
      "@@@STEP_LOG_END@03e0363a003c6ad4: missing@@@",
      "@@@STEP_LOG_LINE@03e0363a003c6ad5: adb status unauthorized@{@@@",
      "@@@STEP_LOG_LINE@03e0363a003c6ad5: adb status unauthorized@  \"adb_status\": \"unauthorized\", @@@",
      "@@@STEP_LOG_LINE@03e0363a003c6ad5: adb status unauthorized@  \"blacklisted\": true, @@@",
      "@@@STEP_LOG_LINE@03e0363a003c6ad5: adb status unauthorized@  \"serial\": \"03e0363a003c6ad5\", @@@",
      "@@@STEP_LOG_LINE@03e0363a003c6ad5: adb status unauthorized@  \"usb_status\": true@@@",
      "@@@STEP_LOG_LINE@03e0363a003c6ad5: adb status unauthorized@}@@@",
      "@@@STEP_LOG_END@03e0363a003c6ad5: adb status unauthorized@@@",
      "@@@STEP_LOG_LINE@03e0363a003c6ad6: blacklisted@{@@@",
      "@@@STEP_LOG_LINE@03e0363a003c6ad6: blacklisted@  \"adb_status\": \"device\", @@@",
      "@@@STEP_LOG_LINE@03e0363a003c6ad6: blacklisted@  \"blacklisted\": true, @@@",
      "@@@STEP_LOG_LINE@03e0363a003c6ad6: blacklisted@  \"serial\": \"03e0363a003c6ad6\", @@@",
      "@@@STEP_LOG_LINE@03e0363a003c6ad6: blacklisted@  \"usb_status\": true@@@",
      "@@@STEP_LOG_LINE@03e0363a003c6ad6: blacklisted@}@@@",
      "@@@STEP_LOG_END@03e0363a003c6ad6: blacklisted@@@"
    ]
  },
  {
    "cmd": [
      "python",
      "-u",
      "[SLAVE_BUILD]/src/build/android/provision_devices.py",
      "-t",
      "Release",
      "--blacklist-file",
      "[SLAVE_BUILD]/src/out/bad_devices.json",
      "--output-device-blacklist",
      "/path/to/tmp/json"
    ],
    "cwd": "[SLAVE_BUILD]",
    "env": {
      "PATH": "[SLAVE_BUILD]/src/third_party/android_tools/sdk/platform-tools:[SLAVE_BUILD]/src/build/android:%(PATH)s"
    },
    "name": "provision_devices (2)"
  },
  {
    "cmd": [
      "python",
      "-u",
      "[SLAVE_BUILD]/src/build/android/test_runner.py",
      "monkey",
      "-v",
      "--package=chrome",
      "--event-count=50000",
      "--blacklist-file",
      "[SLAVE_BUILD]/src/out/bad_devices.json"
    ],
    "cwd": "[SLAVE_BUILD]",
    "env": {
      "BUILDTYPE": "Release"
    },
    "name": "Monkey Test"
  },
  {
    "cmd": [
      "python",
      "-u",
      "[SLAVE_BUILD]/src/build/android/test_runner.py",
      "instrumentation",
      "--test-apk",
      "AndroidWebViewTest",
      "--blacklist-file",
      "[SLAVE_BUILD]/src/out/bad_devices.json",
      "--isolate-file-path",
      "android_webview/android_webview_test_apk.isolate",
      "--flakiness-dashboard-server",
      "test-results.appspot.com",
      "-A",
      "SmallTest",
      "-E",
      "FlakyTest",
      "--screenshot",
      "--release",
      "--host-driven-root",
      "[SLAVE_BUILD]/src/chrome/test",
      "--official-build"
    ],
    "cwd": "[SLAVE_BUILD]",
    "name": "Instrumentation test SmallTest"
  },
  {
    "cmd": [
      "python",
      "-u",
      "[SLAVE_BUILD]/src/build/android/test_runner.py",
      "gtest",
      "-s",
      "unittests",
      "--blacklist-file",
      "[SLAVE_BUILD]/src/out/bad_devices.json",
      "--verbose",
      "--release",
      "--isolate_file_path=[SLAVE_BUILD]/src/some_file.isolate",
      "--gtest_filter=WebRtc*",
      "--tool=asan"
    ],
    "cwd": "[SLAVE_BUILD]",
    "env": {
      "PATH": "[SLAVE_BUILD]/src/third_party/android_tools/sdk/platform-tools:[SLAVE_BUILD]/src/build/android:%(PATH)s"
    },
    "name": "unittests"
  },
  {
    "cmd": [
      "[SLAVE_BUILD]/src/tools/prepare-bisect-perf-regression.py",
      "-w",
      "[SLAVE_BUILD]"
    ],
    "cwd": "[SLAVE_BUILD]",
    "name": "prepare bisect perf regression"
  },
  {
    "cmd": [
      "[SLAVE_BUILD]/src/tools/run-bisect-perf-regression.py",
      "-w",
      "[SLAVE_BUILD]",
      "--extra_src",
      "test.py",
      "--path_to_config",
      "test.py"
    ],
    "cwd": "[SLAVE_BUILD]",
    "name": "run bisect perf regression"
  },
  {
    "cmd": [
      "python",
      "-u",
      "[BUILD]/scripts/slave/tee.py",
      "[SLAVE_BUILD]/src/out/Release/full_log",
      "--",
      "[SLAVE_BUILD]/src/build/android/adb_logcat_printer.py",
      "[SLAVE_BUILD]/src/out/logcat"
    ],
    "cwd": "[SLAVE_BUILD]",
    "name": "logcat_dump"
  },
  {
    "cmd": [
      "[SLAVE_BUILD]/src/third_party/android_platform/development/scripts/stack",
      "--arch",
      "arm",
      "--more-info",
      "[SLAVE_BUILD]/src/out/Release/full_log"
    ],
    "cwd": "[SLAVE_BUILD]",
    "env": {
      "PATH": "[SLAVE_BUILD]/src/third_party/android_tools/sdk/platform-tools:[SLAVE_BUILD]/src/build/android:%(PATH)s"
    },
    "name": "stack_tool_with_logcat_dump"
  },
  {
    "cmd": [
      "[SLAVE_BUILD]/src/build/android/tombstones.py",
      "-a",
      "-s",
      "-w"
    ],
    "cwd": "[SLAVE_BUILD]",
    "env": {
      "PATH": "[SLAVE_BUILD]/src/third_party/android_tools/sdk/platform-tools:[SLAVE_BUILD]/src/build/android:%(PATH)s"
    },
    "name": "stack_tool_for_tombstones"
  },
  {
    "cmd": [
      "[SLAVE_BUILD]/src/build/android/asan_symbolize.py",
      "-l",
      "[SLAVE_BUILD]/src/out/Release/full_log"
    ],
    "cwd": "[SLAVE_BUILD]",
    "env": {
      "PATH": "[SLAVE_BUILD]/src/third_party/android_tools/sdk/platform-tools:[SLAVE_BUILD]/src/build/android:%(PATH)s"
    },
    "name": "stack_tool_for_asan"
  },
  {
    "name": "$result",
    "recipe_result": null,
    "status_code": 0
  }
]